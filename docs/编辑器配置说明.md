# 编辑器自动格式化配置说明

## 📋 概述

本项目已配置了保存时自动格式化和 ESLint 自动修复功能。当您在编辑器中保存文件时，代码会自动格式化和修复可修复的问题。

## ⚙️ 配置功能

### 1. 保存时自动格式化

- ✅ 使用 Prettier 自动格式化代码
- ✅ 统一代码风格（2 空格缩进、单引号、无分号等）
- ✅ 支持多种文件类型：`.js`, `.vue`, `.json`, `.css`, `.scss`, `.html`, `.md` 等

### 2. 保存时自动修复 ESLint 错误

- ✅ 自动修复可修复的 ESLint 问题
- ✅ 修复代码规范问题
- ✅ 修复 Prettier 格式化问题

### 3. 其他自动优化

- ✅ 删除尾随空格
- ✅ 文件末尾自动插入新行
- ✅ 整理导入语句（如果安装了相关扩展）

## 🔧 安装必要的扩展

### 必需扩展

1. **Prettier - Code formatter**
   - 扩展 ID: `esbenp.prettier-vscode`
   - 功能: 代码格式化工具

2. **ESLint**
   - 扩展 ID: `dbaeumer.vscode-eslint`
   - 功能: JavaScript/TypeScript 代码检查

3. **Volar** (Vue 3 项目必需)
   - 扩展 ID: `vue.volar`
   - 功能: Vue 3 官方语言支持

### 安装方式

#### 方式一：自动安装（推荐）

1. 打开 VS Code/Cursor
2. 按 `Ctrl+Shift+P` (Windows/Linux) 或 `Cmd+Shift+P` (Mac)
3. 输入 `Extensions: Show Recommended Extensions`
4. 点击安装推荐的扩展

#### 方式二：手动安装

1. 打开扩展面板 (`Ctrl+Shift+X`)
2. 搜索扩展名称并安装

## 📝 使用说明

### 基本使用

1. **打开文件并编辑**
2. **保存文件** (`Ctrl+S` / `Cmd+S`)
3. 代码会自动格式化和修复

### 验证配置是否生效

1. 打开任意 `.js` 或 `.vue` 文件
2. 故意写一些格式不规范的代码，例如：
   ```javascript
   const test = { a: 1, b: 2 }
   ```
3. 保存文件 (`Ctrl+S`)
4. 代码应该自动格式化为：
   ```javascript
   const test = { a: 1, b: 2 }
   ```

### 手动触发格式化

如果自动格式化没有生效，可以手动触发：

- **格式化整个文件**: `Shift+Alt+F` (Windows/Linux) 或 `Shift+Option+F` (Mac)
- **格式化选中代码**: 选中代码后，右键 → `Format Selection`

### 手动触发 ESLint 修复

- 按 `Ctrl+Shift+P` 打开命令面板
- 输入 `ESLint: Fix all auto-fixable Problems`
- 回车执行

## 🎯 配置文件说明

### 项目配置文件

- `.prettierrc.cjs` - Prettier 格式化规则配置
- `.eslintrc.cjs` - ESLint 代码检查规则配置
- `.editorconfig` - 编辑器基础配置

### VS Code/Cursor 配置

- `.vscode/settings.json` - 编辑器工作区设置（保存时自动格式化等）
- `.vscode/extensions.json` - 推荐的扩展列表

## ❓ 常见问题

### Q1: 保存时没有自动格式化？

**解决方案：**

1. 检查是否安装了 Prettier 扩展
2. 检查文件是否在忽略列表中（`.prettierignore`）
3. 检查编辑器右下角是否显示格式化工具（应该显示 "Prettier"）
4. 尝试手动格式化 (`Shift+Alt+F`) 查看是否有错误提示

### Q2: ESLint 错误没有被自动修复？

**解决方案：**

1. 检查是否安装了 ESLint 扩展
2. 检查 ESLint 扩展是否正常工作（查看输出面板）
3. 某些错误无法自动修复，需要手动修复
4. 运行 `npm run lint` 查看详细错误信息

### Q3: Vue 文件格式化不正确？

**解决方案：**

1. 确保安装了 Volar 扩展（不是 Vetur）
2. 如果安装了 Vetur，请禁用或卸载它
3. 检查 `.vscode/settings.json` 中 Vue 文件的配置

### Q4: 不想自动格式化某个文件？

**解决方案：**

1. 将文件添加到 `.prettierignore`
2. 或者在文件顶部添加注释：
   ```javascript
   // prettier-ignore
   ```

### Q5: 想临时禁用自动格式化？

**解决方案：**

1. 打开命令面板 (`Ctrl+Shift+P`)
2. 输入 `Format Document With...`
3. 选择 "Configure Default Formatter..."
4. 选择 "None" 禁用格式化

或者修改 `.vscode/settings.json`，将 `"editor.formatOnSave": false`

## 🚀 项目脚本

项目提供了以下 npm 脚本：

```bash
# 手动格式化所有文件
npm run format

# 手动修复所有 ESLint 错误
npm run lint
```

## 📚 相关文档

- [Prettier 官方文档](https://prettier.io/)
- [ESLint 官方文档](https://eslint.org/)
- [Volar 官方文档](https://marketplace.visualstudio.com/items?itemName=Vue.volar)

---

**提示**: 如果遇到问题，请检查编辑器输出面板中的错误信息，或运行 `npm run lint` 查看详细的错误报告。
